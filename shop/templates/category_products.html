{% extends 'base.html' %}

{% block content %}
    <h1>Category Products</h1>

    <div class="category-selection">
        <form method="get" action="{% if category %}{% url 'category_products' slug=category.slug %}{% else %}{% url 'category_products' slug='' %}{% endif %}">
            <label for="category">Select a category:</label>
            <select name="category" id="category">
                <option value="">All Categories</option>
                {% for cat in categories %}
                    <option value="{{ cat.slug }}" {% if category and category.slug == cat.slug %}selected{% endif %}>{{ cat.name }}</option>
                {% endfor %}
            </select>
            <button type="submit">Filter</button>
        </form>
    </div>

    <div class="category-products">
        {% if category %}
            <h2>Showing products for: {{ category.name }}</h2>
        {% else %}
            <h2>All Products</h2>
        {% endif %}

        <ul>
            {% for product in products %}
                <li>{{ product.name }}</li>
            {% empty %}
                <li>No products found for this category.</li>
            {% endfor %}
        </ul>
    </div>
{% endblock %}
